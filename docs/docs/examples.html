<!DOCTYPE html><html data-githubContributorsUrl="https://api.github.com/repos/charpov/TinyScalaUtils" data-githubContributorsFilename="site/_docs/examples.md" data-pathToRoot="../"><head><meta charset="utf-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"></meta><title>Code Examples</title><link rel="shortcut icon" type="image/x-icon" href="../favicon.ico"></link><script type="text/javascript" src="../scripts/theme.js"></script><script type="text/javascript" src="../scripts/searchData.js" defer="true"></script><script type="text/javascript" src="../scripts/scastieConfiguration.js" defer="true"></script><link rel="stylesheet" href="../styles/theme/bundle.css"></link><link rel="stylesheet" href="../styles/theme/components/bundle.css"></link><link rel="stylesheet" href="../styles/theme/components/button/bundle.css"></link><link rel="stylesheet" href="../styles/theme/layout/bundle.css"></link><link rel="stylesheet" href="../styles/nord-light.css"></link><link rel="stylesheet" href="../styles/dotty-icons.css"></link><link rel="stylesheet" href="../styles/filter-bar.css"></link><link rel="stylesheet" href="../styles/code-snippets.css"></link><link rel="stylesheet" href="../styles/searchbar.css"></link><link rel="stylesheet" href="../styles/social-links.css"></link><link rel="stylesheet" href="../styles/versions-dropdown.css"></link><link rel="stylesheet" href="../styles/content-contributors.css"></link><link rel="stylesheet" href="../styles/fontawesome.css"></link><script type="text/javascript" src="../hljs/highlight.pack.js" defer="true"></script><script type="text/javascript" src="../scripts/hljs-scala3.js" defer="true"></script><script type="text/javascript" src="../scripts/ux.js" defer="true"></script><script type="text/javascript" src="../scripts/common/component.js" defer="true"></script><script type="text/javascript" src="../scripts/common/utils.js" defer="true"></script><script type="text/javascript" src="../scripts/components/FilterBar.js" defer="true"></script><script type="text/javascript" src="../scripts/components/DocumentableList.js" defer="true"></script><script type="text/javascript" src="../scripts/components/Input.js" defer="true"></script><script type="text/javascript" src="../scripts/components/FilterGroup.js" defer="true"></script><script type="text/javascript" src="../scripts/components/Filter.js" defer="true"></script><script type="text/javascript" src="../scripts/scaladoc-scalajs.js" defer="true"></script><script type="text/javascript" src="../scripts/contributors.js" defer="true"></script><script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js" defer="true"></script><script type="text/javascript" src="https://d3js.org/d3.v6.min.js" defer="true"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/graphlib-dot@0.6.2/dist/graphlib-dot.min.js" defer="true"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/dagre-d3/0.6.1/dagre-d3.min.js" defer="true"></script><script type="text/javascript" src="https://scastie.scala-lang.org/embedded.js" defer="true"></script><script type="text/javascript" src="../scripts/data.js" defer="true"></script><link rel="stylesheet" href="../styles/staticsitestyles.css"></link><script>var pathToRoot = "../";</script></head><body><div id=""><div id="header" class="body-small"><div class="header-container-left"><a href="../" class="logo-container"><span class="project-name h300">TinyScalaUtils</span></a><span onclick="dropdownHandler(event)" class="text-button with-arrow" id="dropdown-trigger"><a><div class="projectVersion">1.4.0</div></a></span><div id="version-dropdown" class="dropdown-menu"></div></div><div class="header-container-right"><button id="search-toggle" class="icon-button"></button><span id="theme-toggle" class="icon-button"></span><span id="mobile-menu-toggle" class="icon-button hamburger"></span></div></div><div id="mobile-menu"><div class="mobile-menu-header body-small"><span class="mobile-menu-logo"><span class="project-name h300">TinyScalaUtils</span></span><button id="mobile-menu-close" class="icon-button close"></button></div><div class="mobile-menu-container body-medium"><input id="mobile-scaladoc-searchbar-input" class="scaladoc-searchbar-input" type="search" placeholder="Find anything"></input><span id="mobile-theme-toggle" class="mobile-menu-item mode"></span></div></div><span id="mobile-sidebar-toggle" class="floating-button"></span><div id="leftColumn" class="body-small"><div class="switcher-container"><a id="docs-nav-button" class="switcher h100 selected" href="index.html">Docs</a><a id="api-nav-button" class="switcher h100 " href="../index.html">API</a></div><nav id="docs-nav" class="side-menu"><div class="ni n0 expanded"><span class="nh h100 selected de"><a href="#"><span>Code Examples</span></a></span></div></nav></div><div id="footer" class="body-small"><div class="left-container">Generated with</div><div class="right-container"><div class="text">Copyright Michel Charpentier, 2024</div></div><div class="text-mobile">Copyright Michel Charpentier, 2024</div></div><div id="scaladoc-searchBar"></div><div id="main"><div class="breadcrumbs container"><a href="index.html">TinyScalaUtils</a>/<a href="examples.html">Code Examples</a></div><div id="content" class="body-medium"><div><section id="code-examples-9">
 <h1 class="h500"><a href="#code-examples-9" class="anchor"></a>Code Examples</h1>
</section>
<section id="package-lang-9">
 <h2 class="h500"><a href="#package-lang-9" class="anchor"></a>Package <code>lang</code></h2>
</section>
<section id="unit-9">
 <h3 class="h400"><a href="#unit-9" class="anchor"></a><code>unit</code></h3>
 <p>A <code>unit</code> value is defined instead of the usual <code>()</code> token for improved readability, e.g.:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>f(((), ())) // hard to parse
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>import tinyscalautils.lang.unit
</span><span line-number="4" class=""><span class="tooltip-container"></span>
</span><span line-number="5" class=""><span class="tooltip-container"></span>f((unit, unit)) // easier
</span></code></pre>
  <div class="buttons"></div>
 </div>
</section>
<section id="interruptibleconstructor--interruptibleequality-9">
 <h3 class="h400"><a href="#interruptibleconstructor--interruptibleequality-9" class="anchor"></a><code>InterruptibleConstructor</code> / <code>InterruptibleEquality</code></h3>
 <p>Checks the interrupted status of the current thread before instance creation and/or equality and hash code:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.lang.{ InterruptibleConstructor, InterruptibleEquality }
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>class C extends InterruptibleConstructor, InterruptibleEquality
</span><span line-number="4" class=""><span class="tooltip-container"></span>
</span><span line-number="5" class=""><span class="tooltip-container"></span>val c = C() // throws InterruptedException if thread is interrupted
</span><span line-number="6" class=""><span class="tooltip-container"></span>c == c // throws InterruptedException if thread is interrupted
</span><span line-number="7" class=""><span class="tooltip-container"></span>c.## // throws InterruptedException if thread is interrupted
</span></code></pre>
  <div class="buttons"></div>
 </div>
</section>
<section id="package-control-9">
 <h2 class="h500"><a href="#package-control-9" class="anchor"></a>Package <code>control</code></h2>
</section>
<section id="times-9">
 <h3 class="h400"><a href="#times-9" class="anchor"></a><code>times</code></h3>
 <p>This is the same <code>times</code> as in <code>Scalactic</code>:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.control.times
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>3 times:
</span><span line-number="4" class=""><span class="tooltip-container"></span>   println("Beetlejuice!")
</span></code></pre>
  <div class="buttons"></div>
 </div>
</section>
<section id="limitedstack--stackoverflowexception-9">
 <h3 class="h400"><a href="#limitedstack--stackoverflowexception-9" class="anchor"></a><code>limitedStack</code> / <code>StackOverflowException</code></h3>
 <p><code>StackOverflowException</code> can replace <code>StackOverflowError</code> where the latter would not adequately be caught:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.lang.StackOverflowException
</span><span line-number="2" class=""><span class="tooltip-container"></span>import tinyscalautils.control.limitedStack
</span><span line-number="3" class=""><span class="tooltip-container"></span>
</span><span line-number="4" class=""><span class="tooltip-container"></span>def f(x: Int): Int = 1 + f(x + 1)
</span><span line-number="5" class=""><span class="tooltip-container"></span>
</span><span line-number="6" class=""><span class="tooltip-container"></span>val t = Try(f(0)) // dies with StackOverflowError, no usable t value
</span><span line-number="7" class=""><span class="tooltip-container"></span>
</span><span line-number="8" class=""><span class="tooltip-container"></span>val t = Try(limitedStack(f(0)))
</span><span line-number="9" class=""><span class="tooltip-container"></span>t.isFailure // true
</span><span line-number="10" class=""><span class="tooltip-container"></span>t.failed.get.isInstanceOf[StackOverflowException] // true
</span></code></pre>
  <div class="buttons"></div>
 </div>
</section>
<section id="interruptibly-9">
 <h3 class="h400"><a href="#interruptibly-9" class="anchor"></a><code>interruptibly</code></h3>
 <p>Checks the interrupted status of the current thread before running some code:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.control.interruptibly
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>while true do interruptibly:
</span><span line-number="4" class=""><span class="tooltip-container"></span>   x += 1
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>The infinite loops terminates with <code>InterruptedException</code> if the thread is interrupted.</p>
</section>
<section id="package-collection-9">
 <h2 class="h500"><a href="#package-collection-9" class="anchor"></a>Package <code>collection</code></h2>
</section>
<section id="circular-9">
 <h3 class="h400"><a href="#circular-9" class="anchor"></a><code>circular</code></h3>
 <p>Produces an infinite collection of elements by continuously repeating a finite collection:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.collection.circular
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>val i: Iterator[Int] = List(1, 2, 3).circular
</span><span line-number="4" class=""><span class="tooltip-container"></span>// i is an infinite iterator: 1,2,3,1,2,3,1,2,3,...
</span><span line-number="5" class=""><span class="tooltip-container"></span>
</span><span line-number="6" class=""><span class="tooltip-container"></span>i.take(10).toList // the list 1,2,3,1,2,3,1,2,3,1
</span></code></pre>
  <div class="buttons"></div>
 </div>
</section>
<section id="shuffle-9">
 <h3 class="h400"><a href="#shuffle-9" class="anchor"></a><code>shuffle</code></h3>
 <p>A convenient way yo invoke <code>Random.shuffle</code> in a pipeline:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.collection.shuffle
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>given Random = ...
</span><span line-number="4" class=""><span class="tooltip-container"></span>
</span><span line-number="5" class=""><span class="tooltip-container"></span>val s = Seq
</span><span line-number="6" class=""><span class="tooltip-container"></span>   .fill(...)(...)
</span><span line-number="7" class=""><span class="tooltip-container"></span>   .map(...)
</span><span line-number="8" class=""><span class="tooltip-container"></span>   .shuffle
</span><span line-number="9" class=""><span class="tooltip-container"></span>   .zipWithIndex
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>instead of:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>val s = rand.shuffle( 
</span><span line-number="2" class=""><span class="tooltip-container"></span>   Seq.fill(...)(...)
</span><span line-number="3" class=""><span class="tooltip-container"></span>      .map(...)
</span><span line-number="4" class=""><span class="tooltip-container"></span>   ).zipWithIndex
</span></code></pre>
  <div class="buttons"></div>
 </div>
</section>
<section id="randomly-9">
 <h3 class="h400"><a href="#randomly-9" class="anchor"></a><code>randomly</code></h3>
 <p>Produces an infinite collection of elements randomly selected from a finite collection:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.collection.randomly
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>given Random = ...
</span><span line-number="4" class=""><span class="tooltip-container"></span>
</span><span line-number="5" class=""><span class="tooltip-container"></span>val i: Iterator[Int] = List(1, 2, 3).randomly
</span><span line-number="6" class=""><span class="tooltip-container"></span>// i is an infinite iterator of 1s, 2s and 3s, in a random order
</span></code></pre>
  <div class="buttons"></div>
 </div>
</section>
<section id="pickonepickoneoption-9">
 <h3 class="h400"><a href="#pickonepickoneoption-9" class="anchor"></a><code>pickOne/pickOneOption</code></h3>
 <p>Produces a randomly selected element from a finite, non-empty collection:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.collection.pickOne
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>given Random = ...
</span><span line-number="4" class=""><span class="tooltip-container"></span>
</span><span line-number="5" class=""><span class="tooltip-container"></span>val n: Int = List(1, 2, 3).pickOne
</span><span line-number="6" class=""><span class="tooltip-container"></span>// n is one of 1, 2 or 3, randomly chosen
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>Exists also as <code>pickOneOption</code> to handle empty collections. These methods should not be used in a loop over the same collection; use <code>randomly</code> instead.</p>
</section>
<section id="javalist-9">
 <h3 class="h400"><a href="#javalist-9" class="anchor"></a><code>JavaList</code></h3>
 <p>Like <code>List.of</code> but with mutable lists:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.collection.JavaList
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>val list = JavaList.of("X", "Y") // a mutable list
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>Lists are <code>ArrayList</code> by default, but <code>LinkedList</code> can be used as well:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.collection.JavaList
</span><span line-number="2" class=""><span class="tooltip-container"></span>import tinyscalautils.collection.LinkedList.factory
</span><span line-number="3" class=""><span class="tooltip-container"></span>
</span><span line-number="4" class=""><span class="tooltip-container"></span>val list = JavaList.of("X", "Y") // a mutable linked list
</span></code></pre>
  <div class="buttons"></div>
 </div>
</section>
<section id="javaset-1">
 <h3 class="h400"><a href="#javaset-1" class="anchor"></a><code>JavaSet</code></h3>
 <p>Like <code>Set.of</code> but with mutable sets:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.collection.JavaSet
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>val set = JavaSet.of("X", "Y") // a mutable set
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>Sets are <code>HashSet</code> by default, but <code>TreeSet</code> can be used as well:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.collection.JavaSet
</span><span line-number="2" class=""><span class="tooltip-container"></span>import tinyscalautils.collection.TreeSet.factory
</span><span line-number="3" class=""><span class="tooltip-container"></span>
</span><span line-number="4" class=""><span class="tooltip-container"></span>val set = JavaSet.of("X", "Y") // a mutable tree set
</span></code></pre>
  <div class="buttons"></div>
 </div>
</section>
<section id="sortedinreverse-9">
 <h3 class="h400"><a href="#sortedinreverse-9" class="anchor"></a><code>sortedInReverse</code></h3>
 <p>Like <code>sorted</code>, but in reverse:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.collection.sortedInReverse
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>val seq = ...       // a sequence
</span><span line-number="4" class=""><span class="tooltip-container"></span>seq.sortedInReverse // same sequence as seq.sorted.reverse, but more efficient
</span></code></pre>
  <div class="buttons"></div>
 </div>
</section>
<section id="package-assertions-9">
 <h2 class="h500"><a href="#package-assertions-9" class="anchor"></a>Package <code>assertions</code></h2>
</section>
<section id="require--requirestate-9">
 <h3 class="h400"><a href="#require--requirestate-9" class="anchor"></a><code>require</code> / <code>requireState</code></h3>
 <p>Simple precondition checking:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.assertions.require
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>// Scala style:
</span><span line-number="4" class=""><span class="tooltip-container"></span>require(cond, s"bad argument because ${someMethod()}")
</span><span line-number="5" class=""><span class="tooltip-container"></span>
</span><span line-number="6" class=""><span class="tooltip-container"></span>// Java style:
</span><span line-number="7" class=""><span class="tooltip-container"></span>require(cond, "bad argument because %s", someMethod())
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>In either case, <code>someMethod()</code> is only evaluated if the condition is false.</p>
 <p>When a requirement fails, <code>require</code> throws <code>IllegalArgumentException</code> while <code>requireState</code> throws <code>IllegalStateException</code>.</p>
</section>
<section id="checknonnull-9">
 <h3 class="h400"><a href="#checknonnull-9" class="anchor"></a><code>checkNonNull</code></h3>
 <p>A utility to help reject <code>null</code> with <code>IllegalArgumentException</code> instead of <code>NullPointerException</code>:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>require(str.nonEmpty, "string cannot be empty") // throws NPE if str is null, Java style
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>import tinyscalautils.assertions.checkNonNull
</span><span line-number="4" class=""><span class="tooltip-container"></span>
</span><span line-number="5" class=""><span class="tooltip-container"></span>require(checkNonNull(str).nonEmpty, "string cannot be empty") // throws IllegalArgumentException on null or empty string
</span></code></pre>
  <div class="buttons"></div>
 </div>
</section>
<section id="implies-9">
 <h3 class="h400"><a href="#implies-9" class="anchor"></a><code>implies</code></h3>
 <p>Logical implication:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>val s: IndexedSeq[Int] = ...
</span><span line-number="2" class=""><span class="tooltip-container"></span>require(!s.indices.contains(i) || s(i) &gt; 0)
</span><span line-number="3" class=""><span class="tooltip-container"></span>
</span><span line-number="4" class=""><span class="tooltip-container"></span>import tinyscalautils.assertions.implies
</span><span line-number="5" class=""><span class="tooltip-container"></span>
</span><span line-number="6" class=""><span class="tooltip-container"></span>require(s.indices.contains(i) implies s(i) &gt; 0)
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>The evaluation is short-circuited: RHS is evaluated only if LHS is true.</p>
</section>
<section id="in-9">
 <h3 class="h400"><a href="#in-9" class="anchor"></a><code>in</code></h3>
 <p>An infix operator that swaps the arguments of <code>contains</code>:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.assertions.in
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>value in (1 to 10) // same as (1 to 10) contains value
</span></code></pre>
  <div class="buttons"></div>
 </div>
</section>
<section id="package-text-9">
 <h2 class="h500"><a href="#package-text-9" class="anchor"></a>Package <code>text</code></h2>
</section>
<section id="stringletters--charletters-9">
 <h3 class="h400"><a href="#stringletters--charletters-9" class="anchor"></a><code>StringLetters</code> / <code>CharLetters</code></h3>
 <p>All cap letters as strings or characters:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import StringLetters.*
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>val list = List(A, B, C)
</span><span line-number="4" class=""><span class="tooltip-container"></span>assert(list.tail.head == B)
</span></code></pre>
  <div class="buttons"></div>
 </div>
</section>
<section id="shortpad-9">
 <h3 class="h400"><a href="#shortpad-9" class="anchor"></a><code>short/pad</code></h3>
 <p>Shortens or pads strings:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.text.{ short, pad }
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>val str = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"
</span><span line-number="4" class=""><span class="tooltip-container"></span>str.short // "ABCDEFGHIJKLMNOPQRSTUVWXYZabc..."
</span><span line-number="5" class=""><span class="tooltip-container"></span>str.short(10) // "ABCDEFG..."
</span><span line-number="6" class=""><span class="tooltip-container"></span>"X".pad(5) // "    X"
</span><span line-number="7" class=""><span class="tooltip-container"></span>"X".pad(5, padding = '.') // "....X"
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>Note that standard method <code>padTo</code> pads strings <em>on the right</em>.</p>
</section>
<section id="print--printf--println-9">
 <h3 class="h400"><a href="#print--printf--println-9" class="anchor"></a><code>print</code> / <code>printf</code> / <code>println</code></h3>
 <p>Adds thread and/or time information to print statements:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.text.{ println, timeMode }
</span><span line-number="2" class=""><span class="tooltip-container"></span>   println("foo") // prints: at 13:02:13.207: foo
</span><span line-number="3" class=""><span class="tooltip-container"></span>   
</span><span line-number="4" class=""><span class="tooltip-container"></span>   import tinyscalautils.text.{ println, timeDemoMode }
</span><span line-number="5" class=""><span class="tooltip-container"></span>   println("foo") // prints: at XX:XX:13.207: foo
</span><span line-number="6" class=""><span class="tooltip-container"></span>   
</span><span line-number="7" class=""><span class="tooltip-container"></span>   import tinyscalautils.text.{ println, threadMode }
</span><span line-number="8" class=""><span class="tooltip-container"></span>   println("foo") // prints: main: foo
</span><span line-number="9" class=""><span class="tooltip-container"></span>   
</span><span line-number="10" class=""><span class="tooltip-container"></span>   import tinyscalautils.text.{ println, threadTimeMode }
</span><span line-number="11" class=""><span class="tooltip-container"></span>   println("foo") // prints: main at 13:02:13.207: foo
</span><span line-number="12" class=""><span class="tooltip-container"></span>   
</span><span line-number="13" class=""><span class="tooltip-container"></span>   import tinyscalautils.text.{ println, threadTimeDemoMode }
</span><span line-number="14" class=""><span class="tooltip-container"></span>   println("foo") // prints: main at XX:XX:13.207: foo
</span><span line-number="15" class=""><span class="tooltip-container"></span>
</span><span line-number="16" class=""><span class="tooltip-container"></span>   import tinyscalautils.text.{ println, standardMode }
</span><span line-number="17" class=""><span class="tooltip-container"></span>   println("foo") // prints: foo
</span><span line-number="18" class=""><span class="tooltip-container"></span>   
</span><span line-number="19" class=""><span class="tooltip-container"></span>   import tinyscalautils.text.{ println, silentMode }
</span><span line-number="20" class=""><span class="tooltip-container"></span>   println("foo") // prints nothing
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>Functions <code>print</code> and <code>printf</code> work similarly. These functions can also be imported as:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.text.threadTimeMode.println
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>which is simpler for most usages (i.e., when not using mode arguments explicitly).</p>
</section>
<section id="printout-9">
 <h3 class="h400"><a href="#printout-9" class="anchor"></a><code>printout</code></h3>
 <p>Captures the output of print statements into a string:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>// the string "hello"
</span><span line-number="2" class=""><span class="tooltip-container"></span>val str = printout:
</span><span line-number="3" class=""><span class="tooltip-container"></span>   Console.out.print("hello")
</span><span line-number="4" class=""><span class="tooltip-container"></span>   Console.err.println(" world")
</span><span line-number="5" class=""><span class="tooltip-container"></span>
</span><span line-number="6" class=""><span class="tooltip-container"></span>// the string "hello world\n"
</span><span line-number="7" class=""><span class="tooltip-container"></span>val str = printout(includeErr = true):
</span><span line-number="8" class=""><span class="tooltip-container"></span>   Console.out.print("hello")
</span><span line-number="9" class=""><span class="tooltip-container"></span>   Console.err.println(" world")
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>By default, only <code>Console.out</code> (and <code>Predef.print</code> and <code>tinyscalautils.text.print</code>, which are based on it) is captured, but <code>System.out</code> and <code>System.err</code> are <em>not</em> captured. This can be changed with an option:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>// the string "hello world\n"
</span><span line-number="2" class=""><span class="tooltip-container"></span>val str = printout(includeSystem = true):
</span><span line-number="3" class=""><span class="tooltip-container"></span>   Console.out.print("hello")
</span><span line-number="4" class=""><span class="tooltip-container"></span>   System.out.println(" world")
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>Note that <code>System.out</code> and <code>System.err</code> are global variables, shared among threads, while <code>Console.out</code> can be different for different threads. To capture the output of newly created threads, these threads should be created within the <code>printout</code> function.</p>
</section>
<section id="plural-9">
 <h3 class="h400"><a href="#plural-9" class="anchor"></a><code>plural</code></h3>
 <p>Plural forms:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.text.plural
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>plural(1, "cat")           // "cat"
</span><span line-number="4" class=""><span class="tooltip-container"></span>plural(2, "DOG")           // "DOGS"
</span><span line-number="5" class=""><span class="tooltip-container"></span>plural(2.3, "platypus")    // "platypuses"
</span><span line-number="6" class=""><span class="tooltip-container"></span>plural(4, "mouse", "mice") // "mice"
</span></code></pre>
  <div class="buttons"></div>
 </div>
</section>
<section id="timestring-9">
 <h3 class="h400"><a href="#timestring-9" class="anchor"></a>timeString</h3>
 <p>Human-friendly representation of a duration expressed in seconds:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.text.timeString
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>timeString(180.02) // "3 minutes, 20 milliseconds"
</span><span line-number="4" class=""><span class="tooltip-container"></span>timeString(3609.732) // "1 hour, 10 seconds"
</span><span line-number="5" class=""><span class="tooltip-container"></span>timeString(3609.732, unitsCount = 3) // "1 hour, 9 seconds, 732 milliseconds"
</span><span line-number="6" class=""><span class="tooltip-container"></span>timeString(3609.732, unitsCount = 1) // "1 hour"
</span></code></pre>
  <div class="buttons"></div>
 </div>
</section>
<section id="package-timing-9">
 <h2 class="h500"><a href="#package-timing-9" class="anchor"></a>Package <code>timing</code></h2>
</section>
<section id="sleep-9">
 <h3 class="h400"><a href="#sleep-9" class="anchor"></a><code>sleep</code></h3>
 <p>Suspends the running thread for a specified number of seconds:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.timing.{ getTime, sleep }
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>sleep(3.0) // sleeps 3 seconds, starting from now
</span><span line-number="4" class=""><span class="tooltip-container"></span>
</span><span line-number="5" class=""><span class="tooltip-container"></span>val start = getTime()
</span><span line-number="6" class=""><span class="tooltip-container"></span>... 
</span><span line-number="7" class=""><span class="tooltip-container"></span>sleep(3.0, start) // sleeps 3 seconds, starting from start time
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>This last example won't sleep at all if more than 3 seconds have already elapsed since time <code>start</code>.</p>
 <p>This method <code>sleep</code> does not undershoot even if <code>Thread.sleep</code> does, and does not throw <code>InterruptedException</code> (but leaves interrupted threads interrupted).</p>
 <p>Non-positive values incur no delay.</p>
</section>
<section id="delay-9">
 <h3 class="h400"><a href="#delay-9" class="anchor"></a><code>delay</code></h3>
 <p>Delays returning a value:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.timing.delay
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>val result = delay(3.0):
</span><span line-number="4" class=""><span class="tooltip-container"></span>   // code
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>This produces the same value as <code>code</code>, but takes 3 seconds (assuming the evaluation of <code>code</code> took less than 3 seconds). Like <code>sleep</code>, also exists in a <code>start</code> variant: <code>delay(3.0, start)(code)</code>.</p>
 <p>Non-positive values incur no delay.</p>
</section>
<section id="timeof-9">
 <h3 class="h400"><a href="#timeof-9" class="anchor"></a><code>timeOf</code></h3>
 <p>The time it took to evaluate some code, in seconds:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.timing.timeOf
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>val time = timeOf:
</span><span line-number="4" class=""><span class="tooltip-container"></span>   // code
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>The value produced by the code, if any, is ignored.</p>
</section>
<section id="timeit-9">
 <h3 class="h400"><a href="#timeit-9" class="anchor"></a><code>timeIt</code></h3>
 <p>The value produced by some code, and the time it took to compute it, as a pair:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.timing.timeIt
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>val (value, time) = timeIt:
</span><span line-number="4" class=""><span class="tooltip-container"></span>   // code
</span></code></pre>
  <div class="buttons"></div>
 </div>
</section>
<section id="timers-9">
 <h3 class="h400"><a href="#timers-9" class="anchor"></a>Timers</h3>
 <p>Simple timers. Can be used explicitly:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.threads.Executors
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>val timer = Executors.newTimer(size = 2)
</span><span line-number="4" class=""><span class="tooltip-container"></span>
</span><span line-number="5" class=""><span class="tooltip-container"></span>timer.execute(2.5):
</span><span line-number="6" class=""><span class="tooltip-container"></span>   // code
</span><span line-number="7" class=""><span class="tooltip-container"></span>   
</span><span line-number="8" class=""><span class="tooltip-container"></span>val future = timer.schedule(1.5):
</span><span line-number="9" class=""><span class="tooltip-container"></span>   // code
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>or implicitly:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.threads.{ DelayedFuture, Executors, ExecuteAfter }
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>given Timer = Executors.newTimer(2)
</span><span line-number="4" class=""><span class="tooltip-container"></span>
</span><span line-number="5" class=""><span class="tooltip-container"></span>ExecuteAfter(2.5):
</span><span line-number="6" class=""><span class="tooltip-container"></span>   // code
</span><span line-number="7" class=""><span class="tooltip-container"></span>
</span><span line-number="8" class=""><span class="tooltip-container"></span>val future = DelayedFuture(1.5):
</span><span line-number="9" class=""><span class="tooltip-container"></span>   // code
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>Note that timers need to be explicitly shut down for their threads to terminate. Timers implement the <code>AutoCloseable</code> interface.</p>
</section>
<section id="zipwithduration-9">
 <h3 class="h400"><a href="#zipwithduration-9" class="anchor"></a><code>zipWithDuration</code></h3>
 <p>Asynchronously adds duration to a future:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.timing.zipWithDuration
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>val future: Future[String] = ...
</span><span line-number="4" class=""><span class="tooltip-container"></span>val f: Future[(String, Double)] = future.zipWithDuration
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>The second half of the pair is the duration (in seconds) between the invocation of <code>zipWithFuture</code> and the completion of <code>future</code>.</p>
</section>
<section id="slow-9">
 <h3 class="h400"><a href="#slow-9" class="anchor"></a><code>slow</code></h3>
 <p>A mechanism to slow down sources of values:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.timing.SlowIterator
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>def i = Iterator.range(0, 1000)
</span><span line-number="4" class=""><span class="tooltip-container"></span>
</span><span line-number="5" class=""><span class="tooltip-container"></span>val sum = i.sum // 499500
</span><span line-number="6" class=""><span class="tooltip-container"></span>val sum = i.slow(10.0).sum // 499500, but in about 10 seconds
</span><span line-number="7" class=""><span class="tooltip-container"></span>
</span><span line-number="8" class=""><span class="tooltip-container"></span>// first 10 elements delayed by about 1 second each, then fast:
</span><span line-number="9" class=""><span class="tooltip-container"></span>i.slow(10.0, delayedElements = 10)
</span><span line-number="10" class=""><span class="tooltip-container"></span>
</span><span line-number="11" class=""><span class="tooltip-container"></span>// first 100 elements delayed by about 0.1 second each, then fast
</span><span line-number="12" class=""><span class="tooltip-container"></span>i.slow(10.0, delayedElements = 100)
</span><span line-number="13" class=""><span class="tooltip-container"></span>
</span><span line-number="14" class=""><span class="tooltip-container"></span>// all elements delayed by about 0.001 second each, then 9-second delay to finish
</span><span line-number="15" class=""><span class="tooltip-container"></span>i.slow(10.0, delayedElements = 10_000)
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>Also available on <code>Source</code> and <code>LazyList</code>.</p>
</section>
<section id="runfor--callfor-9">
 <h3 class="h400"><a href="#runfor--callfor-9" class="anchor"></a><code>runFor</code> / <code>callFor</code></h3>
 <p>Runs iterative code with a time bound:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.threads.Timer
</span><span line-number="2" class=""><span class="tooltip-container"></span>import tinyscalautils.timing.{ runFor, callFor }
</span><span line-number="3" class=""><span class="tooltip-container"></span>
</span><span line-number="4" class=""><span class="tooltip-container"></span>given Timer = ...
</span><span line-number="5" class=""><span class="tooltip-container"></span>
</span><span line-number="6" class=""><span class="tooltip-container"></span>val start: T = ...
</span><span line-number="7" class=""><span class="tooltip-container"></span>def step(st: T): Option[T] = ...
</span><span line-number="8" class=""><span class="tooltip-container"></span>
</span><span line-number="9" class=""><span class="tooltip-container"></span>// runs step until None, at most 1 minute; returns true if no timeout
</span><span line-number="10" class=""><span class="tooltip-container"></span>runFor(60.0)(start)(step) 
</span><span line-number="11" class=""><span class="tooltip-container"></span>
</span><span line-number="12" class=""><span class="tooltip-container"></span>// same but also returns a Seq[T] of step results
</span><span line-number="13" class=""><span class="tooltip-container"></span>callFor(60.0)(start)(step)
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>Also a simpler form with no carried state:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>def step(): Boolean = ...
</span><span line-number="2" class=""><span class="tooltip-container"></span>runFor(60.0)(step)
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>and richer forms that separate state from produced values:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>val start: T = ...
</span><span line-number="2" class=""><span class="tooltip-container"></span>def step(st: T): Option[(A, T)] = ...
</span><span line-number="3" class=""><span class="tooltip-container"></span>
</span><span line-number="4" class=""><span class="tooltip-container"></span>runFor(60.0)(start)(step) // a Boolean and a Seq[A]
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>val start: T = ...
</span><span line-number="2" class=""><span class="tooltip-container"></span>def step(st: T): (A, Option[T]) = ...
</span><span line-number="3" class=""><span class="tooltip-container"></span>
</span><span line-number="4" class=""><span class="tooltip-container"></span>runFor(60.0)(start)(step) // a Boolean and a Seq[A]
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>This last variant produces a last value when it terminates (i.e., <code>(last, None)</code>).</p>
</section>
<section id="package-threads-9">
 <h2 class="h500"><a href="#package-threads-9" class="anchor"></a>Package <code>threads</code></h2>
</section>
<section id="ortimeout-9">
 <h3 class="h400"><a href="#ortimeout-9" class="anchor"></a><code>orTimeout</code></h3>
 <p>Adds a timeout feature to future, similar to Java's:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.threads.{ orTimeout, completeOnTimeout } 
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>val f: Future[Int] = ...
</span><span line-number="4" class=""><span class="tooltip-container"></span>
</span><span line-number="5" class=""><span class="tooltip-container"></span>// completes with value of f, or TimeoutException after 3 seconds
</span><span line-number="6" class=""><span class="tooltip-container"></span>val f1: Future[Int] = f.orTimeout(3.0)
</span><span line-number="7" class=""><span class="tooltip-container"></span>
</span><span line-number="8" class=""><span class="tooltip-container"></span>// same, but executes cancelCode after the timeout
</span><span line-number="9" class=""><span class="tooltip-container"></span>val f2: Future[Int] = f.orTimeout(3.0, cancelCode = ...)
</span><span line-number="10" class=""><span class="tooltip-container"></span>
</span><span line-number="11" class=""><span class="tooltip-container"></span>// completes with value of f, or of altCode if f times out after 3 seconds
</span><span line-number="12" class=""><span class="tooltip-container"></span>// if f completes during the execution of altCode, the value of f is used
</span><span line-number="13" class=""><span class="tooltip-container"></span>val f3: Future[Int] = f.completeOnTimeout(3.0)(altCode)
</span><span line-number="14" class=""><span class="tooltip-container"></span>
</span><span line-number="15" class=""><span class="tooltip-container"></span>// completes with value of f, or of altCode if f times out after 3 seconds
</span><span line-number="16" class=""><span class="tooltip-container"></span>// if f completes during the execution of altCode, the value of altCode is used
</span><span line-number="17" class=""><span class="tooltip-container"></span>val f4: Future[Int] = f.completeOnTimeout(3.0, strict = true)(altCode)
</span></code></pre>
  <div class="buttons"></div>
 </div>
</section>
<section id="executors-9">
 <h3 class="h400"><a href="#executors-9" class="anchor"></a><code>Executors</code></h3>
 <p>A facility to more easily create thread pools with customized thread factories and/or rejected execution handlers. All pools have type <code>ExecutionContextExecutorService</code> for easier use of both Java and Scala features.</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.threads.Executors
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>// same as java.util.concurrent.Executors.newFixedThreadPool
</span><span line-number="4" class=""><span class="tooltip-container"></span>val exec = Executors.newThreadPool(4)
</span><span line-number="5" class=""><span class="tooltip-container"></span>
</span><span line-number="6" class=""><span class="tooltip-container"></span>// sets a rejection policy
</span><span line-number="7" class=""><span class="tooltip-container"></span>val exec = Executors.withRejectionPolicy(rejectionPolicy).newThreadPool(4)
</span><span line-number="8" class=""><span class="tooltip-container"></span>
</span><span line-number="9" class=""><span class="tooltip-container"></span>// sets a "discard" rejection policy
</span><span line-number="10" class=""><span class="tooltip-container"></span>val exec = Executors.silent.newThreadPool(4)
</span><span line-number="11" class=""><span class="tooltip-container"></span>
</span><span line-number="12" class=""><span class="tooltip-container"></span>// sets a thread facyory
</span><span line-number="13" class=""><span class="tooltip-container"></span>val exec = Executors.withFactory(threadFactory).newThreadPool(2)
</span><span line-number="14" class=""><span class="tooltip-container"></span>
</span><span line-number="15" class=""><span class="tooltip-container"></span>// sets a rejection policy and a thread factory
</span><span line-number="16" class=""><span class="tooltip-container"></span>val exec = Executors
</span><span line-number="17" class=""><span class="tooltip-container"></span>   .withRejectionPolicy(rejectionPolicy)
</span><span line-number="18" class=""><span class="tooltip-container"></span>   .withFactory(threadFactory)
</span><span line-number="19" class=""><span class="tooltip-container"></span>   .newThreadPool(4)
</span><span line-number="20" class=""><span class="tooltip-container"></span>
</span><span line-number="21" class=""><span class="tooltip-container"></span>// sets a thread factory and a rejection policy (equivalent as above)
</span><span line-number="22" class=""><span class="tooltip-container"></span>val exec = Executors
</span><span line-number="23" class=""><span class="tooltip-container"></span>   .withFactory(threadFactory)
</span><span line-number="24" class=""><span class="tooltip-container"></span>   .withRejectionPolicy(rejectionPolicy)
</span><span line-number="25" class=""><span class="tooltip-container"></span>   .newThreadPool(4)
</span><span line-number="26" class=""><span class="tooltip-container"></span>
</span><span line-number="27" class=""><span class="tooltip-container"></span>// same as java.util.concurrent.Executors.newCachedThreadPool
</span><span line-number="28" class=""><span class="tooltip-container"></span>val exec = Executors.newUnlimitedThreadPool(60.0)
</span><span line-number="29" class=""><span class="tooltip-container"></span>
</span><span line-number="30" class=""><span class="tooltip-container"></span>// same as above, but terminates idle threads after 1 second instead of 1 minute
</span><span line-number="31" class=""><span class="tooltip-container"></span>val exec = Executors.newUnlimitedThreadPool()
</span><span line-number="32" class=""><span class="tooltip-container"></span>
</span><span line-number="33" class=""><span class="tooltip-container"></span>// sets a rejection policy and a thread factory, as with newThreadPool
</span><span line-number="34" class=""><span class="tooltip-container"></span>val exec = Executors
</span><span line-number="35" class=""><span class="tooltip-container"></span>   .withRejectionPolicy(rejectionPolicy)
</span><span line-number="36" class=""><span class="tooltip-container"></span>   .withFactory(threadFactory)
</span><span line-number="37" class=""><span class="tooltip-container"></span>   .newUnlimitedThreadPool()
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>A <code>global</code> implicit is defined as an unlimited pool with a 1-second keep-alive time (and non-daemon threads):</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>given ExecutionContext = tinyscalautils.threads.Executors.global
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>val f = Future { ... } // runs on global thread pool
</span></code></pre>
  <div class="buttons"></div>
 </div>
</section>
<section id="run--executeexecuteafter-9">
 <h3 class="h400"><a href="#run--executeexecuteafter-9" class="anchor"></a><code>run</code> / <code>Execute/ExecuteAfter</code></h3>
 <p>Executes code on an executor:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.threads.{ run, Execute, ExecuteAfter }
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>given exec: Executor = ...
</span><span line-number="4" class=""><span class="tooltip-container"></span>
</span><span line-number="5" class=""><span class="tooltip-container"></span>exec.run:
</span><span line-number="6" class=""><span class="tooltip-container"></span>   // code
</span><span line-number="7" class=""><span class="tooltip-container"></span>
</span><span line-number="8" class=""><span class="tooltip-container"></span>Execute:
</span><span line-number="9" class=""><span class="tooltip-container"></span>   // code
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>Both functions return <code>Unit</code> (no future).</p>
</section>
<section id="keepthreadsfactory-9">
 <h3 class="h400"><a href="#keepthreadsfactory-9" class="anchor"></a><code>KeepThreadsFactory</code></h3>
 <p>A thread factory that keeps a reference on all the threads it creates:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.threads.{ KeepThreadsFactory, Executors }
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>val tf = KeepThreadsFactory()
</span><span line-number="4" class=""><span class="tooltip-container"></span>val exec = Executors.withFactory(threadFactory).newUnlimitedThreadPool()
</span><span line-number="5" class=""><span class="tooltip-container"></span>
</span><span line-number="6" class=""><span class="tooltip-container"></span>// use the exec pool...
</span><span line-number="7" class=""><span class="tooltip-container"></span>
</span><span line-number="8" class=""><span class="tooltip-container"></span>val threads = tf.allThreads // all created threads so far, in order of creation
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>The collection returned by <code>allThreads</code> is live: threads newly created by the factory will be added to it. The factory can be reset: threads created before the reset are discarded.</p>
</section>
<section id="markedthreadsfactory-9">
 <h3 class="h400"><a href="#markedthreadsfactory-9" class="anchor"></a><code>MarkedThreadsFactory</code></h3>
 <p>A cheaper alternative to <code>KeepThreadsFactory</code>: All the threads produced by the factory are distinguished by having type <code>MarkedThread</code>:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.threads.{ MarkedThreadsFactory, Executors }
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>given exec: ExecutionContextExecutorService =
</span><span line-number="4" class=""><span class="tooltip-container"></span>   Executors.withFactory(MarkedThreadsFactory).newThreadPool(4)
</span><span line-number="5" class=""><span class="tooltip-container"></span>
</span><span line-number="6" class=""><span class="tooltip-container"></span>val future = Future(Thread.currentThread())
</span><span line-number="7" class=""><span class="tooltip-container"></span>val runner = Await.result(future, Duration.Inf)
</span><span line-number="8" class=""><span class="tooltip-container"></span>runner.isInstanceOf[MarkedThread] // true
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>For convenience, an extension can be used to check for <code>MarkedThread</code> type:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.threads.isMarkedThread
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>runner.isMarkedThread // true
</span></code></pre>
  <div class="buttons"></div>
 </div>
</section>
<section id="awaittermination-9">
 <h3 class="h400"><a href="#awaittermination-9" class="anchor"></a><code>awaitTermination</code></h3>
 <p>A variant of the standard <code>awaitTermination</code> method in which the timeout is optional and specified in seconds:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.threads.awaitTermination
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>val exec: ExecutorService = ...
</span><span line-number="4" class=""><span class="tooltip-container"></span>
</span><span line-number="5" class=""><span class="tooltip-container"></span>if exec.awaitTermination(5.0) ... // waits at most 5 seconds
</span><span line-number="6" class=""><span class="tooltip-container"></span>if exec.awaitTermination() ...    // waits indefinitely
</span></code></pre>
  <div class="buttons"></div>
 </div>
</section>
<section id="shutdownandwait-9">
 <h3 class="h400"><a href="#shutdownandwait-9" class="anchor"></a><code>shutdownAndWait</code></h3>
 <p>Combines <code>shutdown</code>, <code>shutdownNow</code> and <code>awaitTermination</code> in one method:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.threads.shutdownAndWait
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>val exec: ExecutorService = ...
</span><span line-number="4" class=""><span class="tooltip-container"></span>
</span><span line-number="5" class=""><span class="tooltip-container"></span>if exec.shutdownAndWait(5.0)
</span><span line-number="6" class=""><span class="tooltip-container"></span>   then // shutdown was invoked, and pool terminated within 5 seconds
</span><span line-number="7" class=""><span class="tooltip-container"></span>   else // shutdown was invoked, but pool did not terminate within 5 seconds
</span><span line-number="8" class=""><span class="tooltip-container"></span>
</span><span line-number="9" class=""><span class="tooltip-container"></span>if exec.shutdownAndWait(5.0, force = true)
</span><span line-number="10" class=""><span class="tooltip-container"></span>   then // shutdown was invoked, and pool terminated within 5 seconds
</span><span line-number="11" class=""><span class="tooltip-container"></span>   else // shutdown was invoked, then after 5 seconds, shutdownNow was invoked
</span><span line-number="12" class=""><span class="tooltip-container"></span>   
</span><span line-number="13" class=""><span class="tooltip-container"></span>exec.shutdownAndWait() // invokes shutdown and waits indefinitely; returns true
</span></code></pre>
  <div class="buttons"></div>
 </div>
</section>
<section id="await-9">
 <h3 class="h400"><a href="#await-9" class="anchor"></a><code>await</code></h3>
 <p>Adds a variant of <code>await</code> on <code>CountDownLatch</code> that specifies its timeout in seconds:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.threads.await
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>val latch: CountDownLatch = ...
</span><span line-number="4" class=""><span class="tooltip-container"></span>
</span><span line-number="5" class=""><span class="tooltip-container"></span>latch.await(5.0)
</span></code></pre>
  <div class="buttons"></div>
 </div>
</section>
<section id="countdownandwait-9">
 <h3 class="h400"><a href="#countdownandwait-9" class="anchor"></a><code>countDownAndWait</code></h3>
 <p>Combines <code>countDown</code> and <code>await</code>:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.threads.countDownAndWait
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>val latch: CountDownLatch = ...
</span><span line-number="4" class=""><span class="tooltip-container"></span>
</span><span line-number="5" class=""><span class="tooltip-container"></span>latch.countDownAndWait()
</span><span line-number="6" class=""><span class="tooltip-container"></span>latch.countDownAndWait(3.0)
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>Waits forever (interruptibly) if no timeout is specified.</p>
</section>
<section id="acquire-9">
 <h3 class="h400"><a href="#acquire-9" class="anchor"></a><code>acquire</code></h3>
 <p>Adds a variant of <code>acquire</code> on <code>Semaphore</code> that specifies its timeout in seconds:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.threads.acquire
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>val sem: Semaphore = ...
</span><span line-number="4" class=""><span class="tooltip-container"></span>
</span><span line-number="5" class=""><span class="tooltip-container"></span>sem.acquire(1, seconds = 3.0)
</span></code></pre>
  <div class="buttons"></div>
 </div>
</section>
<section id="offer--poll-9">
 <h3 class="h400"><a href="#offer--poll-9" class="anchor"></a><code>offer</code> / <code>poll</code></h3>
 <p>Adds variant of <code>offer</code> and <code>poll</code> on blocking queues that specifies their timeout in seconds:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.threads.{ offer, poll }
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>val q = ArrayBlockingQueue[String](1)
</span><span line-number="4" class=""><span class="tooltip-container"></span>q.offer("X", seconds = 1.0) // true, immediately
</span><span line-number="5" class=""><span class="tooltip-container"></span>q.offer("X", seconds = 1.0) // false, after 1 second
</span><span line-number="6" class=""><span class="tooltip-container"></span>q.poll(seconds = 1.0)       // "X", immediately
</span><span line-number="7" class=""><span class="tooltip-container"></span>q.poll(seconds = 1.0)       // null, after 1 second
</span></code></pre>
  <div class="buttons"></div>
 </div>
</section>
<section id="joined-9">
 <h3 class="h400"><a href="#joined-9" class="anchor"></a><code>joined</code></h3>
 <p>Combines <code>join</code> and <code>isAlive</code>:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.threads.joined
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>if thread.joined(3.0)
</span><span line-number="4" class=""><span class="tooltip-container"></span>   then ... // thread is terminated (or never started)
</span><span line-number="5" class=""><span class="tooltip-container"></span>   else ... // 3-second timeout; thread may still be running
</span></code></pre>
  <div class="buttons"></div>
 </div>
</section>
<section id="newthread-9">
 <h3 class="h400"><a href="#newthread-9" class="anchor"></a><code>newThread</code></h3>
 <p>Kotlin-like functions for easier thread creation:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.threads.newThread 
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>val thread = newThread(name = "Joe", start = false, daemon = true, waitForChildren = false):
</span><span line-number="4" class=""><span class="tooltip-container"></span>   // code
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>All arguments have default values and are optional. Be aware that <code>waitForChildren</code> only works if children are created within the same thread group (which is not always the case for the default thread factory of <code>java.util.concurrent.Executors</code>).</p>
</section>
<section id="execution-contexts-9">
 <h3 class="h400"><a href="#execution-contexts-9" class="anchor"></a>Execution contexts</h3>
 <p>Easy setup of execution contexts, mostly for testing:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.threads.withThreadsAndWait
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>val result = withThreadsAndWait(4):
</span><span line-number="4" class=""><span class="tooltip-container"></span>   Future(42)
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>This creates a 4-thread pool, runs the future on it, waits for the future to finish, shuts down the thread pool, and sets <code>result</code> to 42. Additionally, if <code>awaitTermination</code> is set to true, the constructs also waits for the thread pool to terminate before setting the result. All waiting is done without a timeout. Exists also as a <code>withUnlimitedThreadsAndWait</code> variant for an unbounded thread pool.</p>
 <p>The preceding constructs require the code to produce a future. For a "fire-and-forget" approach, use <code>withThreads</code> and <code>withUnlimitedThreads</code>, which can use an arbitrary code.</p>
 <p>These constructs create and shut down a new thread pool. To reuse an existing thread pool, use <code>withThreadPoolAndWait</code>:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.threads.withThreadPoolAndWait
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>val exec = Executors.newUnlimitedThreadPool()
</span><span line-number="4" class=""><span class="tooltip-container"></span>val result = withThreadPoolAndWait(exec):
</span><span line-number="5" class=""><span class="tooltip-container"></span>   Future(42)
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>This runs the future on the thread pool and waits for the future to finish before setting <code>result</code> to 42. The thread pool is left as-is. Alternatively, setting <code>shutdown</code> to true shuts down the thread pool after the future has completed (but does not not wait for the thread pool to terminate).</p>
 <p>Note that if <code>shutdown</code> is known to be false at compile time, the thread pool doesn't need a <code>shutdown</code> method. In particular, it can be of type <code>Executor</code> or <code>ExecutionContext</code>:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>withThreadPoolAndWait(ExecutionContext.global, shutdown = false):
</span><span line-number="2" class=""><span class="tooltip-container"></span>   Future:
</span><span line-number="3" class=""><span class="tooltip-container"></span>      ...
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>This runs the future on the global execution context, and waits for its termination.</p>
</section>
<section id="runasync-9">
 <h3 class="h400"><a href="#runasync-9" class="anchor"></a><code>runAsync</code></h3>
 <p>Run code synchronously in another thread:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.threads.runAsync
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>val result = runAsync(code)
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>The thread is specified as an implicit <code>Executor</code> or <code>ExecutionContext</code>.</p>
 <p>The purpose of this function is to run non-interruptible code interruptibly.</p>
</section>
<section id="package-io-9">
 <h2 class="h500"><a href="#package-io-9" class="anchor"></a>Package <code>io</code></h2>
</section>
<section id="listpaths-9">
 <h3 class="h400"><a href="#listpaths-9" class="anchor"></a><code>listPaths</code></h3>
 <p>The contents of a directory, as a list:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.io.listPaths
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>for path: Path &lt;- listPaths(dir) do ...
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>If a list type is not suitable, use <code>readPaths</code> instead:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.io.readPaths
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>val paths: Set[Path] = readPaths(Set)(dir)
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p><em>DO NOT</em> use a stream for the collection. Since the directory is closed before this function finishes, lazily evaluated collections won't work.</p>
</section>
<section id="readreadall-9">
 <h3 class="h400"><a href="#readreadall-9" class="anchor"></a><code>read/readAll</code></h3>
 <p>The contents of a UTF8 text file, as a collection of line elements:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.io.{ readAll, given }
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>def parse(line: String): Option[Int] = ...
</span><span line-number="4" class=""><span class="tooltip-container"></span>
</span><span line-number="5" class=""><span class="tooltip-container"></span>readAll(IndexedSeq)(file, parse)     // an IndexedSeq[Int]
</span><span line-number="6" class=""><span class="tooltip-container"></span>readAll(IndexedSeq)(file)            // all non-blank lines
</span><span line-number="7" class=""><span class="tooltip-container"></span>readAll(IndexedSeq)(file, noParsing) // all lines
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>If no factory is specified, it defaults to <code>List</code>, e.g.:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>readAll(file, parse)     // a List[Int]
</span><span line-number="2" class=""><span class="tooltip-container"></span>readAll(file)            // a List[String]
</span><span line-number="3" class=""><span class="tooltip-container"></span>readAll(file, noParsing) // a List[String]
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p><code>read</code> does no parsing and returns the entire file contents as a single string.</p>
 <p>The argument <code>file</code> must belong to the <code>Input</code> type class, which is predefined to contain <code>InputStream</code>, <code>URL</code>, <code>Path</code>, <code>File</code> and <code>String</code> (as a filename).</p>
 <p><em>DO NOT</em> use a stream for the collection. Since the source is closed before this function finishes, lazily evaluated collections won't work.</p>
</section>
<section id="readingall-9">
 <h3 class="h400"><a href="#readingall-9" class="anchor"></a><code>readingAll</code></h3>
 <p>This is a variant of <code>readAll</code> that returns values as a closeable iterator:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.io.{ readingAll, given }
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>def parse(line: String): Option[Int] = ...
</span><span line-number="4" class=""><span class="tooltip-container"></span>
</span><span line-number="5" class=""><span class="tooltip-container"></span>Using.resource(readingAll(file, parse)): i =&gt;
</span><span line-number="6" class=""><span class="tooltip-container"></span>   // i has type Iterator[Int]
</span><span line-number="7" class=""><span class="tooltip-container"></span>// file input closed here
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p><code>readingAll</code> does not support a silent mode.</p>
</section>
<section id="writewriteall-9">
 <h3 class="h400"><a href="#writewriteall-9" class="anchor"></a><code>write/writeAll</code></h3>
 <p>Write data to a UTF8 text file:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.io.{ write, writeAll, given }
</span><span line-number="2" class=""><span class="tooltip-container"></span>   
</span><span line-number="3" class=""><span class="tooltip-container"></span>   val list = List(1, 2, 3)
</span><span line-number="4" class=""><span class="tooltip-container"></span>
</span><span line-number="5" class=""><span class="tooltip-container"></span>   write(file)(list)                                      // file contains "List(1, 2, 3)"
</span><span line-number="6" class=""><span class="tooltip-container"></span>   write(file, newline = true)(list)                      // file contains "List(1, 2, 3)\n"
</span><span line-number="7" class=""><span class="tooltip-container"></span>   writeAll(file)(list)                                   // file contains "1\n2\n3\n"
</span><span line-number="8" class=""><span class="tooltip-container"></span>   writeAll(sep = ",")(file)(list)                        // file contains "1,2,3"
</span><span line-number="9" class=""><span class="tooltip-container"></span>   writeAll(pre = "[", sep = ",", post = "]")(file)(list) // file contains "[1,2,3]"
</span><span line-number="10" class=""><span class="tooltip-container"></span>   writeAll()(file)(list)                                 // file contains "123"
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>Note that the simplified <code>writeAll</code> variant includes a final newline after the last value.</p>
 <p>The argument <code>file</code> must belong to the <code>Output</code> type class, which is predefined to contain <code>OutputStream</code>, <code>Path</code>, <code>File</code> and <code>String</code> (as a filename).</p>
</section>
<section id="findresourcefindresourceasstream-9">
 <h3 class="h400"><a href="#findresourcefindresourceasstream-9" class="anchor"></a><code>findResource/findResourceAsStream</code></h3>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.io.findResource
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>val url = this.findResource(name)
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>This is equivalent to <code>getClass.getResource(name)</code>, except that it throws an exception for missing resources (instead of returning <code>null</code>). In particular, a leading slash in the resource name makes it an absolute path, instead of being associated with the package name by default.</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>val url = this.findResource(fallback)(name)
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>This variant uses a fallback URI instead of failing with <code>MissingResourceException</code>.</p>
 <p>The <code>findResourceAsStream</code> variants work in the same way but looks for a GZIP compressed variant of a resource before giving up.</p>
</section>
<section id="package-util-9">
 <h2 class="h500"><a href="#package-util-9" class="anchor"></a>Package <code>util</code></h2>
</section>
<section id="fastrandom-9">
 <h3 class="h400"><a href="#fastrandom-9" class="anchor"></a><code>FastRandom</code></h3>
 <p>Faster random number generators that don't rely on the <code>java.util.Random</code> thread-safe implementation. Individual instances are not thread-safe, but the singleton <code>FastRandom</code> can be shared among threads without contention:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.util.FastRandom
</span><span line-number="2" class=""><span class="tooltip-container"></span>impot scala.util.Random
</span><span line-number="3" class=""><span class="tooltip-container"></span>
</span><span line-number="4" class=""><span class="tooltip-container"></span>val rand: Random = FastRandom(42L) // fast, but not thread-safe
</span><span line-number="5" class=""><span class="tooltip-container"></span>
</span><span line-number="6" class=""><span class="tooltip-container"></span>val rand: Random = FastRandom // fast, thread-safe, but cannot be seeded
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>The implementation relies on <code>ThreadLocalRandom</code> and <code>SplittableRandom</code>, available in Java 11, not on the fancier generators that were added to Java 17.</p>
</section>
<section id="nextint-9">
 <h3 class="h400"><a href="#nextint-9" class="anchor"></a><code>nextInt</code></h3>
 <p>A Kotlin-inspired alternative to <code>pickOne</code> to select random numbers from a range:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.util.nextInt
</span><span line-number="2" class=""><span class="tooltip-container"></span>impot scala.util.Random
</span><span line-number="3" class=""><span class="tooltip-container"></span>
</span><span line-number="4" class=""><span class="tooltip-container"></span>val rand: Random = ...
</span><span line-number="5" class=""><span class="tooltip-container"></span>
</span><span line-number="6" class=""><span class="tooltip-container"></span>rand.nextInt(1 to 10)
</span><span line-number="7" class=""><span class="tooltip-container"></span>rand.nextInt(0 until 100)
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>This looks nicer than <code>(1 to 10).pickone(using rand)</code> and <code>(0 until 100).pickone(using rand)</code>.</p>
</section>
<section id="interruptible-9">
 <h3 class="h400"><a href="#interruptible-9" class="anchor"></a><code>interruptible</code></h3>
 <p>Makes all the methods of <code>Random</code> interruptible, i.e., <code>rand.interruptible.nextInt()</code> is the same as <code>interruptibly(rand.nextInt())</code>.</p>
 <p>Note that <code>rand.interruptible.self</code> does <em>not</em> check for interrupts.</p>
</section>
<section id="log2-9">
 <h3 class="h400"><a href="#log2-9" class="anchor"></a><code>log2</code></h3>
 <p>Base 2 integer logarithm:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.util.log2
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>log2(1) // 0
</span><span line-number="4" class=""><span class="tooltip-container"></span>log2(7) // 2
</span><span line-number="5" class=""><span class="tooltip-container"></span>log2(8) // 3
</span><span line-number="6" class=""><span class="tooltip-container"></span>log2(1L &lt;&lt; 62) // 62
</span></code></pre>
  <div class="buttons"></div>
 </div>
</section>
<section id="average-9">
 <h3 class="h400"><a href="#average-9" class="anchor"></a><code>average</code></h3>
 <p>Calculates an average by ignoring a fixed number of low/high values:</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>val nums: Seq[BigDecimal] = Seq(12, 1, 7, 11, 14, 9)
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>average(nums)    // (1 + 7 + 9 + 11 + 12 + 14) / 6
</span><span line-number="4" class=""><span class="tooltip-container"></span>average(nums, 1) // (7 + 9 + 11 + 12) / 4
</span><span line-number="5" class=""><span class="tooltip-container"></span>average(nums, 2) // (9 + 11) / 2
</span><span line-number="6" class=""><span class="tooltip-container"></span>average(nums, 3) // 0
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>The function works on any <code>Fractional</code> type, including <code>Double</code>.</p>
</section>
<section id="dotstar-9">
 <h3 class="h400"><a href="#dotstar-9" class="anchor"></a><code>dot/star</code></h3>
 <p>An identity function that prints a single dot (or star):</p>
 <div class="snippet mono-small-block" scala-snippet="">
  <pre><code class="language-scala"><span line-number="1" class=""><span class="tooltip-container"></span>import tinyscalautils.util.dot
</span><span line-number="2" class=""><span class="tooltip-container"></span>
</span><span line-number="3" class=""><span class="tooltip-container"></span>val x = dot(y)  // x eq y and a dot was printed
</span><span line-number="4" class=""><span class="tooltip-container"></span>val x = star(y) // x eq y and a star was printed
</span></code></pre>
  <div class="buttons"></div>
 </div>
 <p>Importing <code>tinyscalautils.text.silentMode</code> stops the dot/star from being printed. Printing modes other than <code>silent</code> and <code>standard</code> cannot be used.</p>
</section></div><div id="toc" class="body-small"><div id="toc-container"><span class="toc-title h200">In this article</span><nav class="toc-nav"><ul class="toc-list"><li><a href="#code-examples-9">Code Examples</a><ul><li><a href="#package-lang-9">Package lang</a><ul><li><a href="#unit-9">unit</a></li><li><a href="#interruptibleconstructor--interruptibleequality-9">InterruptibleConstructor / InterruptibleEquality</a></li></ul></li><li><a href="#package-control-9">Package control</a><ul><li><a href="#times-9">times</a></li><li><a href="#limitedstack--stackoverflowexception-9">limitedStack / StackOverflowException</a></li><li><a href="#interruptibly-9">interruptibly</a></li></ul></li><li><a href="#package-collection-9">Package collection</a><ul><li><a href="#circular-9">circular</a></li><li><a href="#shuffle-9">shuffle</a></li><li><a href="#randomly-9">randomly</a></li><li><a href="#pickonepickoneoption-9">pickOne/pickOneOption</a></li><li><a href="#javalist-9">JavaList</a></li><li><a href="#javaset-1">JavaSet</a></li><li><a href="#sortedinreverse-9">sortedInReverse</a></li></ul></li><li><a href="#package-assertions-9">Package assertions</a><ul><li><a href="#require--requirestate-9">require / requireState</a></li><li><a href="#checknonnull-9">checkNonNull</a></li><li><a href="#implies-9">implies</a></li><li><a href="#in-9">in</a></li></ul></li><li><a href="#package-text-9">Package text</a><ul><li><a href="#stringletters--charletters-9">StringLetters / CharLetters</a></li><li><a href="#shortpad-9">short/pad</a></li><li><a href="#print--printf--println-9">print / printf / println</a></li><li><a href="#printout-9">printout</a></li><li><a href="#plural-9">plural</a></li><li><a href="#timestring-9">timeString</a></li></ul></li><li><a href="#package-timing-9">Package timing</a><ul><li><a href="#sleep-9">sleep</a></li><li><a href="#delay-9">delay</a></li><li><a href="#timeof-9">timeOf</a></li><li><a href="#timeit-9">timeIt</a></li><li><a href="#timers-9">Timers</a></li><li><a href="#zipwithduration-9">zipWithDuration</a></li><li><a href="#slow-9">slow</a></li><li><a href="#runfor--callfor-9">runFor / callFor</a></li></ul></li><li><a href="#package-threads-9">Package threads</a><ul><li><a href="#ortimeout-9">orTimeout</a></li><li><a href="#executors-9">Executors</a></li><li><a href="#run--executeexecuteafter-9">run / Execute/ExecuteAfter</a></li><li><a href="#keepthreadsfactory-9">KeepThreadsFactory</a></li><li><a href="#markedthreadsfactory-9">MarkedThreadsFactory</a></li><li><a href="#awaittermination-9">awaitTermination</a></li><li><a href="#shutdownandwait-9">shutdownAndWait</a></li><li><a href="#await-9">await</a></li><li><a href="#countdownandwait-9">countDownAndWait</a></li><li><a href="#acquire-9">acquire</a></li><li><a href="#offer--poll-9">offer / poll</a></li><li><a href="#joined-9">joined</a></li><li><a href="#newthread-9">newThread</a></li><li><a href="#execution-contexts-9">Execution contexts</a></li><li><a href="#runasync-9">runAsync</a></li></ul></li><li><a href="#package-io-9">Package io</a><ul><li><a href="#listpaths-9">listPaths</a></li><li><a href="#readreadall-9">read/readAll</a></li><li><a href="#readingall-9">readingAll</a></li><li><a href="#writewriteall-9">write/writeAll</a></li><li><a href="#findresourcefindresourceasstream-9">findResource/findResourceAsStream</a></li></ul></li><li><a href="#package-util-9">Package util</a><ul><li><a href="#fastrandom-9">FastRandom</a></li><li><a href="#nextint-9">nextInt</a></li><li><a href="#interruptible-9">interruptible</a></li><li><a href="#log2-9">log2</a></li><li><a href="#average-9">average</a></li><li><a href="#dotstar-9">dot/star</a></li></ul></li></ul></li></ul></nav></div></div></div><div id="footer" class="body-small mobile-footer"><div class="left-container">Generated with</div><div class="right-container"><div class="text">Copyright Michel Charpentier, 2024</div></div><div class="text-mobile">Copyright Michel Charpentier, 2024</div></div></div></div></body></html>